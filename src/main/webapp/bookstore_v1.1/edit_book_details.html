<!DOCTYPE html>
<html>
<head>
    <title>添加书籍详情</title>
    <meta charset="UTF-8"/>
    <style type="text/css">
        .responseData{
            opacity: 0;
            position: absolute;
            width:0;
            height:0;
        }
        .edit-area{
            opacity:0;
        }
        .save-book-details{
            height:30px;
            line-height: 30px;
            width:100%;
            background:#5f5f5f;
            margin:0;
            padding:0;
            color:#B4A078;
            box-shadow:2px 2px 2px #5f5f5f;
            text-align:right;
        }
        .save-book-details>span{
            margin-right:40px;
            cursor:pointer;
        }
        .save-book-details>span:hover{
            color:#FFF;
        }
    </style>
</head>
<body >
    <form  id="userEdit" action="cKAction.action" method="post" target="responseData">
        <textarea id="editor" name="editor" class="ckeditor edit-area"></textarea>
        <p class="save-book-details"><button type="submit">保存</button></p>
    </form>
    <iframe id="responseData" name="responseData" class="responseData"></iframe>

    <script type="text/javascript" src="./js/jquery-1.12.3.js"></script>
    <script type="text/javascript" src="http://localhost:8080/ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="http://localhost:8080/ckfinder/ckfinder.js"></script>
    <script>
        $('#responseData').load(function(){
            var frameObj = document.getElementById('responseData');
            var frameContent = frameObj.contentWindow.document.getElementsByTagName('pre')[0].innerHTML;//获得iframe中指定元素的内容
            frameContent=frameContent.slice(47,65);
            console.log(frameContent);
            var addBookUrl='http://localhost:8080/bookstore_v1.1/mer_add_book.html?detailUrl=http://localhost:8080/study/book_details/'+frameContent;
            window.open(addBookUrl,'_self');
        });
    </script>
</body>
</html>